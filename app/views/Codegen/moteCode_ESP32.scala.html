@(server: String, channel: String, controls: List[model.codegen.Interactable])

/************************************************************************************************
   Generated by OOCSI-web 0.25

   How to use this?
   Step 1: fill in the ssid and password fields for the wifi you want to connect to with the ESP
   Step 2: create a unique handle (-> OOCSIName) and fill in the server (-> hostname)
   Step 3: use the controlled variables in the loop() function

************************************************************************************************/

#include "OOCSI.h"

// use this if you want the OOCSI-ESP library to manage the connection to the Wifi
// SSID of your Wifi network, the library currently does not support WPA2 Enterprise networks
const char* ssid = "yourssid";
// Password of your Wifi network.
const char* password = "yourpassword";

// name for connecting with OOCSI (unique handle)
const char* OOCSIName = "ESP_OOCSI_CLIENT_RECEIVER";
// put the adress of your OOCSI server here, can be URL or IP address string
const char* hostserver = "@server";

// OOCSI reference for the entire sketch
OOCSI oocsi = OOCSI();

// controlled variables
@for(control <- controls) {
@if(control.isButton()){boolean @control.getVarName() = false;}
@if(control.isSlider()){int @control.getVarName() = @control.getDefault();}
}
long lastUpdate = 0;

// put your setup code here, to run once:
void setup() {
  Serial.begin(115200);

  // output OOCSI activity on the built-in LED
  // pinMode(LED_BUILTIN, OUTPUT);
  // oocsi.setActivityLEDPin(LED_BUILTIN);

  // use this to switch off logging to Serial
  // oocsi.setLogging(false);

  // setting up OOCSI. processOOCSI is the name of the fucntion to call when receiving messages, can be a random function name
  // connect wifi and OOCSI to the server
  oocsi.connect(OOCSIName, hostserver, ssid, password, processOOCSI);
  oocsi.subscribe("@channel");
}

void loop() {

  // put your main code here, to run repeatedly:
  // ...
  // ..
  // .
  // here you can use the controlled variables in how the design "acts"
  // .
  // ..
  // ...

  // let OOCSI check to process incoming data
  oocsi.check();
}

// ----------------------------------------------------------------------------------------------

// function which OOCSI calls when an OOCSI message is received
void processOOCSI() {

@for(control <- controls) {
@if(control.isButton()){  @control.getVarName() = oocsi.getBool("@control.par", @control.getVarName());}
@if(control.isSlider()){  @control.getVarName() = oocsi.getInt("@control.par", @control.getVarName());}
}
  lastUpdate = oocsi.getTimeStamp();
}